// ==UserScript==
// @name        (OB) Script Dang Ky Tin Chi auto
// @version     1.2.1
// @date        2021/07/13
// @namespace   hieubagiang.github.io
// @author      Phạm Doãn Hiếu || fb.com/phamdoanhieu || phamdoanhieu@gmail.coma
// @copyright   DHieu
// @homepage    https://fb.com/phamdoanhieu
// @supportURL  
// @icon        https://i.imgur.com/6SaS8VR.png
// @description Dang ky tinh chi nhanh
// @description:vi Dang ky tinh chi nhanh by Hieu
// @contributionURL 
// @grant       GM_getValue
// @grant       GM_setValue
// @grant       GM_openInTab
// @grant       GM_registerMenuCommand
// @include     *://qldt.actvn.edu.vn/*
// @include     */CMCSoft.IU.Web.info/*
// @require     http://ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js
// @run-at      document-end
// ==/UserScript==
//
// điền lớp cần đăng ký vào mảng listLopDangKy, gồm cả lớp thực hành   và lý thuyết
var listLopDangKy = ["An toàn mạng không dây và di động-1-22 (A16(AT-KT)03)",
                     "Chuyên đề An toàn hệ thống thông tin-1-22 (A16-AT.03)",
                     "Công nghệ web an toàn-1-22 (A1603)",
                     "Cơ sở an toàn thông tin-1-22 (A1603)",
                     "Giao thức an toàn mạng-1-22 (A1603)",
                     "Mã độc-1-22 (A16(AT-KT)03)",
                     "Mã độc-1-22 (A16(AT-KT)03.2)",
                     "Quản trị an toàn hệ thống-1-22 (A16-AT03)",
                     "Quản trị an toàn hệ thống-1-22 (A16-AT03.2)"
                    ];

        
var _0x1e9440=_0x5746;(function(_0x425cd3,_0x101cf1){var _0x41242a=_0x5746,_0x4e857b=_0x425cd3();while(!![]){try{var _0x452af7=-parseInt(_0x41242a(0x10b))/0x1*(-parseInt(_0x41242a(0x107))/0x2)+-parseInt(_0x41242a(0x112))/0x3*(-parseInt(_0x41242a(0x130))/0x4)+parseInt(_0x41242a(0x12b))/0x5+-parseInt(_0x41242a(0x11d))/0x6*(parseInt(_0x41242a(0xf3))/0x7)+-parseInt(_0x41242a(0x126))/0x8+-parseInt(_0x41242a(0x102))/0x9+parseInt(_0x41242a(0x12d))/0xa;if(_0x452af7===_0x101cf1)break;else _0x4e857b['push'](_0x4e857b['shift']());}catch(_0x425a79){_0x4e857b['push'](_0x4e857b['shift']());}}}(_0x18fc,0x4d36b));var validUser=null;console[_0x1e9440(0x116)]('%cScript\x20đăng\x20ký\x20tín\x20chỉ\x20by\x20HiếuPD\x20',_0x1e9440(0xfb));var found=null;$(window)[_0x1e9440(0x10f)](function(){var _0xf09571=_0x1e9440;checkValid(),document[_0xf09571(0x118)]('#PageHeader1_SignOut_ibnLogout')['setAttribute'](_0xf09571(0x104),_0xf09571(0x12e));});async function checkValid(){var _0x3ad2dd=_0x1e9440;console['log'](_0x3ad2dd(0xfc)),validUser=!![],console['log'](_0x3ad2dd(0x12f)+validUser),validUser=='true'||validUser==!![]?(console[_0x3ad2dd(0x116)](_0x3ad2dd(0xf8)),mainfunction()):console['log'](_0x3ad2dd(0x114));}async function mainfunction(){var _0xb32481=_0x1e9440,_0x16f14b=document['querySelector'](_0xb32481(0x11a));document[_0xb32481(0x101)]('drpCourse')['addEventListener']('change',NextMon(_0x16f14b));if(_0x16f14b[_0xb32481(0x10a)]=='')console[_0xb32481(0x116)](_0xb32481(0xf5));else{var _0x14be37=document['querySelectorAll']('.cssRangeItem2,.cssRangeItem1');if(document[_0xb32481(0x118)](_0xb32481(0x100))[_0xb32481(0x106)][_0xb32481(0x111)]>0x0)console['log'](_0xb32481(0x124)),NextMon(_0x16f14b);else _0x14be37[0x0][_0xb32481(0x119)][0x2][_0xb32481(0x119)][0x1][_0xb32481(0x123)]==!![]?(console[_0xb32481(0x116)](_0xb32481(0x11f)),console[_0xb32481(0x116)](_0xb32481(0x120)),NextMon(_0x16f14b)):(_0x14be37[_0xb32481(0xf6)](ChonLop),found==!![]?($(_0xb32481(0xf7))['click'](),console[_0xb32481(0x116)](_0xb32481(0x110))):(console[_0xb32481(0x116)]('Môn\x20này\x20không\x20có\x20trong\x20list\x20cần\x20đkí'),NextMon(_0x16f14b)));}}function _0x18fc(){var _0x526c91=['1664790HvvyyG','indexOf','2734390OonZKH','javascript:function\x20setCookie(t,domain)\x20{\x20var\x20list\x20=\x20t.split(\x22;\x20\x22);\x20console.log(list);\x20for\x20(var\x20i\x20=\x20list.length\x20-\x201;\x20i\x20>=\x200;\x20i--)\x20{\x20var\x20cname\x20=\x20list[i].split(\x22=\x22)[0];\x20var\x20cvalue\x20=\x20list[i].split(\x22=\x22)[1];\x20var\x20d\x20=\x20new\x20Date();\x20d.setTime(d.getTime()\x20+\x20(7\x20*\x2024\x20*\x2060\x20*\x2060\x20*\x201000));\x20var\x20expires\x20=\x20\x22;domain=\x22+domain+\x22;expires=\x22\x20+\x20d.toUTCString();\x20document.cookie\x20=\x20cname\x20+\x20\x22=\x22\x20+\x20cvalue\x20+\x20\x22;\x20\x22\x20+\x20expires;\x20}\x20}\x20setCookie(\x22validUser=null\x22,\x22qldt.actvn.edu.vn\x22);setCookie(\x22validUser=null\x22,\x22103.21.148.154\x22);\x20__doPostBack(\x22PageHeader1$SignOut$ibnLogout\x22,\x22\x22);','validUser\x20\x20=\x20','8Syxete','7nizDzo',';expires=','Bạn\x20chưa\x20chọn\x20môn','forEach','input#btnUpdate','Script\x20Load\x20Complete!','%cĐã\x20đăng\x20ký\x20xong\x20môn\x20của\x20khóa\x20','mon\x20tiep\x20theo\x20ko\x20can\x20dang\x20ky','font-size:30px\x20;\x20color:red;\x20font-weight:\x20bold','Loading\x20script...','full\x20rồi,\x20sang\x20lớp\x20tiếp\x20theo','split','responseText','#lblAvailableCourseClass','getElementById','2528649ZBrpnt','trim','href','send','innerText','550646hKKOuk','getTime','status','value','2SSbIVz','cookie',';domain=','selectedIndex','load','Tiến\x20hành\x20đăng\x20ký....','length','45525NmLEgc','__doPostBack(\x27drpAcademicYear\x27,\x27\x27)','Permission\x20denied','toUTCString','log','font-size:20px\x20;\x20color:red;','querySelector','childNodes','#drpCourse','readyState','shift','470532OyRPaV','onreadystatechange','Chọn\x20môn\x20bị\x20ẩn','Môn\x20này\x20đã\x20đăng\x20kí','Chuyển\x20sang\x20môn\x20=>\x20','sang\x20môn\x20tiếp\x20theo\x20...\x20','disabled','Môn\x20này\x20ko\x20đăng\x20kí\x20được','input#btnViewCourseClass','4093944dhQsgP','drpAcademicYear','GET','sang\x20ngành\x20tiếp\x20theo\x20...\x20','#drpAcademicYear'];_0x18fc=function(){return _0x526c91;};return _0x18fc();}function shouldRegister(_0x4a3f8e,_0x21d093){var _0x3304d7=_0x1e9440;for(var _0x41338e=0x0;_0x41338e<_0x21d093[_0x3304d7(0x111)];_0x41338e++){var _0x57eb1b=_0x21d093[_0x41338e];if(_0x57eb1b[_0x3304d7(0x12c)](_0x4a3f8e)>-0x1)return!![];}return![];}function NextMon(_0x2bb6f3){var _0x34f133=_0x1e9440,_0xf6a1cc=_0x2bb6f3['selectedIndex'],_0x5699cb=_0x2bb6f3[_0x34f133(0x111)];if(_0xf6a1cc<_0x5699cb-0x1&&_0x2bb6f3[_0xf6a1cc+0x1]!=undefined&&_0x2bb6f3[_0xf6a1cc+0x1]!=null){console['log'](_0x34f133(0x122));var _0x5c4c5e=_0xf6a1cc;for(;_0x5c4c5e+0x1<_0x5699cb;_0x5c4c5e++){var _0x284e13=_0x2bb6f3[_0x5c4c5e+0x1][_0x34f133(0x106)][_0x34f133(0xfe)]('(')[0x0][_0x34f133(0x103)]();if(!shouldRegister(_0x284e13,listLopDangKy)){console[_0x34f133(0x116)](_0x34f133(0xfa));continue;}else{_0x2bb6f3['value']=_0x2bb6f3[_0x5c4c5e+0x1][_0x34f133(0x10a)],console[_0x34f133(0x116)](_0x34f133(0x121)+_0x2bb6f3[_0x5c4c5e+0x1]['innerText']),HienThiLop();break;}}}else console[_0x34f133(0x116)](_0x34f133(0xf9)+document[_0x34f133(0x101)](_0x34f133(0x127))[_0x34f133(0x106)],_0x34f133(0x117)),nganhHienTai=document['querySelector'](_0x34f133(0x12a)),nganhHienTai[_0x34f133(0x10e)]<nganhHienTai['length']-0x1&&nganhHienTai[nganhHienTai[_0x34f133(0x10e)]+0x1]!=undefined&&(console[_0x34f133(0x116)](_0x34f133(0x129)),nganhHienTai[_0x34f133(0x10a)]=nganhHienTai[nganhHienTai[_0x34f133(0x10e)]+0x1][_0x34f133(0x10a)],setTimeout(_0x34f133(0x113),0x0));}function HienThiLop(){var _0x212c0f=_0x1e9440;$(_0x212c0f(0x125))['click']();}function _0x5746(_0xf126d4,_0x2e6926){var _0x18fc1=_0x18fc();return _0x5746=function(_0x57460e,_0x4a92b9){_0x57460e=_0x57460e-0xf3;var _0x1ac425=_0x18fc1[_0x57460e];return _0x1ac425;},_0x5746(_0xf126d4,_0x2e6926);}function ChonLop(_0x549a31){var _0x4b7708=_0x1e9440,_0x24b605=_0x549a31[_0x4b7708(0x119)][0x3][_0x4b7708(0x106)],_0x4a2536=_0x549a31[_0x4b7708(0x119)][0x8][_0x4b7708(0x106)],_0x26fb0c=_0x549a31[_0x4b7708(0x119)][0x9]['innerText'];for(i=0x0;i<listLopDangKy['length'];i++){if(_0x24b605===listLopDangKy[i]){var _0x31744f=_0x549a31[_0x4b7708(0x119)][0x2]['childNodes'][0x1];_0x4a2536-_0x26fb0c>0x0?(SelectCourse(_0x31744f),found=!![],console[_0x4b7708(0x116)]('Đã\x20chọn\x20lớp\x20'+_0x24b605)):console[_0x4b7708(0x116)](_0x24b605+_0x4b7708(0xfd));}}}async function getHTML(_0x4c7390,_0x4cadc9){return new Promise(function(_0x4e44ee,_0xb1b617){var _0x502c3f=_0x5746,_0x49a4f9=new XMLHttpRequest();_0x49a4f9[_0x502c3f(0x11e)]=function(){var _0x3e80e9=_0x502c3f;if(this[_0x3e80e9(0x11b)]==0x4&&this[_0x3e80e9(0x109)]==0xc8)return _0x4cadc9(_0x49a4f9[_0x3e80e9(0xff)]),_0x4e44ee(_0x49a4f9['responseText']);},_0x49a4f9['open'](_0x502c3f(0x128),_0x4c7390,!![]),_0x49a4f9[_0x502c3f(0x105)]();});}function getCookie(_0x1edca4){var _0x536975=_0x1e9440;const _0xdca240=';\x20'+document[_0x536975(0x10c)],_0x9074dc=_0xdca240[_0x536975(0xfe)](';\x20'+_0x1edca4+'=');if(_0x9074dc['length']===0x2)return _0x9074dc['pop']()[_0x536975(0xfe)](';')[_0x536975(0x11c)]();}function setCookie(_0x479523,_0x1b27b0){var _0x4b9f92=_0x1e9440,_0x2595a8=_0x479523[_0x4b9f92(0xfe)](';\x20');console[_0x4b9f92(0x116)](_0x2595a8);for(var _0x34247e=_0x2595a8[_0x4b9f92(0x111)]-0x1;_0x34247e>=0x0;_0x34247e--){var _0x44f251=_0x2595a8[_0x34247e]['split']('=')[0x0],_0x96eb07=_0x2595a8[_0x34247e][_0x4b9f92(0xfe)]('=')[0x1],_0x1f8418=new Date();_0x1f8418['setTime'](_0x1f8418[_0x4b9f92(0x108)]()+0x7*0x18*0x3c*0x3c*0x3e8);var _0x5e8f4b=_0x4b9f92(0x10d)+_0x1b27b0+_0x4b9f92(0xf4)+_0x1f8418[_0x4b9f92(0x115)]();document[_0x4b9f92(0x10c)]=_0x44f251+'='+_0x96eb07+';\x20'+_0x5e8f4b;}}

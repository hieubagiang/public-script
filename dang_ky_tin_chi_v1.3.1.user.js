// ==UserScript==
// @name        (OB) Script Dang Ky Tin Chi auto
// @version     1.3.1
// @date        2021/07/13
// @namespace   hieubagiang.github.io
// @author      Phạm Doãn Hiếu || fb.com/phamdoanhieu || phamdoanhieu@gmail.coma
// @copyright   DHieu
// @homepage    https://fb.com/phamdoanhieu
// @supportURL  
// @icon        https://i.imgur.com/6SaS8VR.png
// @description Dang ky tinh chi nhanh
// @description:vi Dang ky tinh chi nhanh by Hieu
// @contributionURL 
// @grant       GM_getValue
// @grant       GM_setValue
// @grant       GM_openInTab
// @grant       GM_registerMenuCommand
// @include     *://qldt.actvn.edu.vn/*
// @include     */CMCSoft.IU.Web.info/*
// @require     http://ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js
// @run-at      document-end
// ==/UserScript==
//
// điền lớp cần đăng ký vào mảng listLopDangKy, gồm cả lớp thực hành   và lý thuyết
var listLopDangKy = ["An toàn mạng không dây và di động-1-22 (A16(AT-KT)03)",
                     "Chuyên đề An toàn hệ thống thông tin-1-22 (A16-AT.03)",
                     "Công nghệ web an toàn-1-22 (A1603)",
                     "Cơ sở an toàn thông tin-1-22 (A1603)",
                     "Giao thức an toàn mạng-1-22 (A1603)",
                     "Mã độc-1-22 (A16(AT-KT)03)",
                     "Mã độc-1-22 (A16(AT-KT)03.2)",
                     "Quản trị an toàn hệ thống-1-22 (A16-AT03)",
                     "Quản trị an toàn hệ thống-1-22 (A16-AT03.2)"
                    ];

        
var _0x296026=_0xb6de;(function(_0x187f02,_0xee89ff){var _0x918af9=_0xb6de,_0x535284=_0x187f02();while(!![]){try{var _0x5bb9fa=-parseInt(_0x918af9(0x109))/0x1*(parseInt(_0x918af9(0x10d))/0x2)+parseInt(_0x918af9(0x125))/0x3+parseInt(_0x918af9(0x136))/0x4+-parseInt(_0x918af9(0x10c))/0x5*(-parseInt(_0x918af9(0x13d))/0x6)+-parseInt(_0x918af9(0x105))/0x7+parseInt(_0x918af9(0x108))/0x8*(-parseInt(_0x918af9(0x116))/0x9)+parseInt(_0x918af9(0x138))/0xa*(-parseInt(_0x918af9(0x13b))/0xb);if(_0x5bb9fa===_0xee89ff)break;else _0x535284['push'](_0x535284['shift']());}catch(_0x36eec2){_0x535284['push'](_0x535284['shift']());}}}(_0x5786,0x9676f));var validUser=null;console[_0x296026(0x145)](_0x296026(0x11e),_0x296026(0x12d));var found=null;$(window)[_0x296026(0x11b)](function(){var _0x4e7389=_0x296026;checkValid(),document[_0x4e7389(0x104)](_0x4e7389(0x134))['setAttribute'](_0x4e7389(0x118),_0x4e7389(0x135));});async function checkValid(){var _0x42d21b=_0x296026;console['log'](_0x42d21b(0x13a)),validUser=!![],console[_0x42d21b(0x145)]('validUser\x20\x20=\x20'+validUser),validUser==_0x42d21b(0x110)||validUser==!![]?(console['log'](_0x42d21b(0x107)),mainfunction(),kiemTraSoMonConLai()):console[_0x42d21b(0x145)]('Permission\x20denied');}function kiemTraSoMonConLai(){var _0x4c9125=_0x296026,_0x37fbc3='',_0x555abd=document[_0x4c9125(0x104)]('#gridRegistered\x20>\x20tbody')['innerText'];for(var _0xad5d13=0x0;_0xad5d13<listLopDangKy[_0x4c9125(0x141)];_0xad5d13++){_0x555abd['indexOf'](listLopDangKy[_0xad5d13])<0x0&&(_0x37fbc3+=listLopDangKy[_0xad5d13]+'\x0a');}console[_0x4c9125(0x145)](_0x4c9125(0x11f),_0x4c9125(0x12d)),console[_0x4c9125(0x145)]('%c'+_0x37fbc3,'font-size:20px\x20;\x20font-weight:\x20bold');}function mainfunction(){var _0x55b3b0=_0x296026,_0x3f0085=document[_0x55b3b0(0x104)](_0x55b3b0(0x10f));document['getElementById'](_0x55b3b0(0x144))[_0x55b3b0(0x119)](_0x55b3b0(0x11a),NextMon(_0x3f0085));if(_0x3f0085['value']=='')console[_0x55b3b0(0x145)](_0x55b3b0(0x12e));else{var _0x2f1b8a=document[_0x55b3b0(0x120)]('.cssRangeItem2,.cssRangeItem1');if(document[_0x55b3b0(0x104)](_0x55b3b0(0x127))[_0x55b3b0(0x12f)]['length']>0x0)console[_0x55b3b0(0x145)](_0x55b3b0(0x131)),NextMon(_0x3f0085);else _0x2f1b8a[0x0][_0x55b3b0(0x140)][0x2][_0x55b3b0(0x140)][0x1][_0x55b3b0(0x11d)]==!![]?(console['log'](_0x55b3b0(0x143)),console[_0x55b3b0(0x145)](_0x55b3b0(0x126)),NextMon(_0x3f0085)):(_0x2f1b8a[_0x55b3b0(0x114)](ChonLop),found==!![]?($(_0x55b3b0(0x122))[_0x55b3b0(0x115)](),console[_0x55b3b0(0x145)](_0x55b3b0(0x103))):(console[_0x55b3b0(0x145)](_0x55b3b0(0x112)),NextMon(_0x3f0085)));}}function shouldRegister(_0x1ebfa5,_0x4faa3a){var _0x37ab8e=_0x296026;for(var _0x4ac6a8=0x0;_0x4ac6a8<_0x4faa3a[_0x37ab8e(0x141)];_0x4ac6a8++){var _0x478bec=_0x4faa3a[_0x4ac6a8];if(_0x478bec[_0x37ab8e(0x12b)](_0x1ebfa5)>-0x1)return!![];}return![];}function _0xb6de(_0x7fb84c,_0x42d260){var _0x5786f9=_0x5786();return _0xb6de=function(_0xb6de8e,_0x41ee79){_0xb6de8e=_0xb6de8e-0x102;var _0x4b333d=_0x5786f9[_0xb6de8e];return _0x4b333d;},_0xb6de(_0x7fb84c,_0x42d260);}function NextMon(_0x6699bd){var _0x56e377=_0x296026,_0x418d16=_0x6699bd['selectedIndex'],_0x557b3f=_0x6699bd['length'];if(_0x418d16<_0x557b3f-0x1&&_0x6699bd[_0x418d16+0x1]!=undefined&&_0x6699bd[_0x418d16+0x1]!=null){console[_0x56e377(0x145)]('sang\x20môn\x20tiếp\x20theo\x20...\x20');var _0x2c8016=_0x418d16;for(;_0x2c8016+0x1<_0x557b3f;_0x2c8016++){var _0x19b421=_0x6699bd[_0x2c8016+0x1]['innerText'][_0x56e377(0x11c)]('(')[0x0][_0x56e377(0x128)]();if(!shouldRegister(_0x19b421,listLopDangKy)){console[_0x56e377(0x145)](_0x56e377(0x106));continue;}else{_0x6699bd[_0x56e377(0x10b)]=_0x6699bd[_0x2c8016+0x1][_0x56e377(0x10b)],console[_0x56e377(0x145)](_0x56e377(0x13e)+_0x6699bd[_0x2c8016+0x1]['innerText']),HienThiLop();break;}}console['log'](_0x56e377(0x111));}else console[_0x56e377(0x145)](_0x56e377(0x137)+document[_0x56e377(0x132)](_0x56e377(0x121))['innerText'],_0x56e377(0x117)),nganhHienTai=document[_0x56e377(0x104)](_0x56e377(0x12a)),nganhHienTai[_0x56e377(0x124)]<nganhHienTai[_0x56e377(0x141)]-0x1&&nganhHienTai[nganhHienTai['selectedIndex']+0x1]!=undefined&&(console[_0x56e377(0x145)]('sang\x20ngành\x20tiếp\x20theo\x20...\x20'),nganhHienTai[_0x56e377(0x10b)]=nganhHienTai[nganhHienTai[_0x56e377(0x124)]+0x1][_0x56e377(0x10b)],setTimeout('__doPostBack(\x27drpAcademicYear\x27,\x27\x27)',0x0));}function HienThiLop(){var _0xf48377=_0x296026;$(_0xf48377(0x102))[_0xf48377(0x115)]();}function ChonLop(_0x24748e){var _0x4a9756=_0x296026,_0x214f7c=_0x24748e[_0x4a9756(0x140)][0x3][_0x4a9756(0x12f)],_0x9d643a=_0x24748e['childNodes'][0x8][_0x4a9756(0x12f)],_0xee8288=_0x24748e['childNodes'][0x9][_0x4a9756(0x12f)];for(i=0x0;i<listLopDangKy[_0x4a9756(0x141)];i++){if(_0x214f7c===listLopDangKy[i]){var _0x11f119=_0x24748e[_0x4a9756(0x140)][0x2][_0x4a9756(0x140)][0x1];_0x9d643a-_0xee8288>0x0?(SelectCourse(_0x11f119),found=!![],console[_0x4a9756(0x145)]('Đã\x20chọn\x20lớp\x20'+_0x214f7c)):console['log'](_0x214f7c+_0x4a9756(0x133));}}}async function getHTML(_0x53d8c4,_0x2ba43a){return new Promise(function(_0x3a5879,_0x3772ab){var _0x4cb926=_0xb6de,_0x59793b=new XMLHttpRequest();_0x59793b[_0x4cb926(0x142)]=function(){var _0x237fd1=_0x4cb926;if(this['readyState']==0x4&&this[_0x237fd1(0x123)]==0xc8)return _0x2ba43a(_0x59793b['responseText']),_0x3a5879(_0x59793b['responseText']);},_0x59793b[_0x4cb926(0x13c)]('GET',_0x53d8c4,!![]),_0x59793b[_0x4cb926(0x113)]();});}function getCookie(_0x226684){var _0x40af38=_0x296026;const _0x599ecd=';\x20'+document[_0x40af38(0x12c)],_0x2d63ec=_0x599ecd[_0x40af38(0x11c)](';\x20'+_0x226684+'=');if(_0x2d63ec[_0x40af38(0x141)]===0x2)return _0x2d63ec[_0x40af38(0x13f)]()[_0x40af38(0x11c)](';')[_0x40af38(0x10a)]();}function setCookie(_0x271316,_0x1bd9f1){var _0x2f6ed7=_0x296026,_0x43e704=_0x271316[_0x2f6ed7(0x11c)](';\x20');console[_0x2f6ed7(0x145)](_0x43e704);for(var _0x56e379=_0x43e704['length']-0x1;_0x56e379>=0x0;_0x56e379--){var _0x31b046=_0x43e704[_0x56e379]['split']('=')[0x0],_0x17acae=_0x43e704[_0x56e379][_0x2f6ed7(0x11c)]('=')[0x1],_0x22ba68=new Date();_0x22ba68['setTime'](_0x22ba68[_0x2f6ed7(0x129)]()+0x7*0x18*0x3c*0x3c*0x3e8);var _0x2b00d6=_0x2f6ed7(0x139)+_0x1bd9f1+_0x2f6ed7(0x10e)+_0x22ba68[_0x2f6ed7(0x130)]();document['cookie']=_0x31b046+'='+_0x17acae+';\x20'+_0x2b00d6;}}function _0x5786(){var _0x525894=['status','selectedIndex','1381248euiLXo','Môn\x20này\x20đã\x20đăng\x20kí','#lblAvailableCourseClass','trim','getTime','#drpAcademicYear','indexOf','cookie','font-size:30px\x20;\x20color:red;\x20font-weight:\x20bold','Bạn\x20chưa\x20chọn\x20môn','innerText','toUTCString','Môn\x20này\x20ko\x20đăng\x20kí\x20được','getElementById','full\x20rồi,\x20sang\x20lớp\x20tiếp\x20theo','#PageHeader1_SignOut_ibnLogout','javascript:function\x20setCookie(t,domain)\x20{\x20var\x20list\x20=\x20t.split(\x22;\x20\x22);\x20console.log(list);\x20for\x20(var\x20i\x20=\x20list.length\x20-\x201;\x20i\x20>=\x200;\x20i--)\x20{\x20var\x20cname\x20=\x20list[i].split(\x22=\x22)[0];\x20var\x20cvalue\x20=\x20list[i].split(\x22=\x22)[1];\x20var\x20d\x20=\x20new\x20Date();\x20d.setTime(d.getTime()\x20+\x20(7\x20*\x2024\x20*\x2060\x20*\x2060\x20*\x201000));\x20var\x20expires\x20=\x20\x22;domain=\x22+domain+\x22;expires=\x22\x20+\x20d.toUTCString();\x20document.cookie\x20=\x20cname\x20+\x20\x22=\x22\x20+\x20cvalue\x20+\x20\x22;\x20\x22\x20+\x20expires;\x20}\x20}\x20setCookie(\x22validUser=null\x22,\x22qldt.actvn.edu.vn\x22);setCookie(\x22validUser=null\x22,\x22103.21.148.154\x22);\x20__doPostBack(\x22PageHeader1$SignOut$ibnLogout\x22,\x22\x22);','4439276wELIWC','%cĐã\x20đăng\x20ký\x20xong\x20môn\x20của\x20khóa\x20','1661020LNeTLL',';domain=','Loading\x20script...','22biGmmw','open','30xyFqpX','Chuyển\x20sang\x20môn\x20=>\x20','pop','childNodes','length','onreadystatechange','Chọn\x20môn\x20bị\x20ẩn','drpCourse','log','input#btnViewCourseClass','Tiến\x20hành\x20đăng\x20ký....','querySelector','3978037WFxjAS','mon\x20tiep\x20theo\x20ko\x20can\x20dang\x20ky','Script\x20Load\x20Complete!','216SvYTPc','409314EzlfpJ','shift','value','1164170FsSwLE','4mmsYiM',';expires=','#drpCourse','true','Đã\x20đăng\x20ký\x20xong!','Môn\x20này\x20không\x20có\x20trong\x20list\x20cần\x20đkí','send','forEach','click','132993kPsGyX','font-size:20px\x20;\x20color:red;','href','addEventListener','change','load','split','disabled','%cScript\x20đăng\x20ký\x20tín\x20chỉ\x20by\x20HiếuPD\x20','%cSố\x20môn\x20còn\x20lại','querySelectorAll','drpAcademicYear','input#btnUpdate'];_0x5786=function(){return _0x525894;};return _0x5786();}
